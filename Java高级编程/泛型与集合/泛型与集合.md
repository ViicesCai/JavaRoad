# 泛型与集合

## 1.集合的特点

+ 集合类是一个用来存放对象的容器
+ 只能存放对象
+ 与数组的区别是长度不是固定的，可变
+ 集合是对象数组的升级版

### 集合中元素是什么类型？

+ 使用Object

  + 好处：存入时方便（向上转型）
  + 问题：使用时要向下转型；有风险（instandof），影响效率

+ JDK1.5用泛型改进（参数化类型）

  + 写代码时：类型待定（占位符）

    ``` java
    // 形参：数据待定
    ArrayList<E>
    ```

  + 使用时：给出明确的类型

    ```java
    // 实参：给出明确的数据
    ArrayList<Student> list = new ArrayList<Student>();
    ArrayList<Student> list = new ArrayList<>();
    ```

+ 泛型的优点

  + 代码简单，复用性高
  + 类型安全，消除了强制类型转换 使得代码可读性好，减少了很多出错的机会

## 2.集合的结构体系

### Collection<E> 单列

+ List<E> 可重复，有序

  + ArrayList

    + 底层结构是数组，查询快、增删慢
    + 线程不安全，效率高

    ```java
    // 创建ArrayList
    ArrayList<E> list = new ArrayList();
    ```

  + LinkedList

    + 底层数据结构是链表，查询快、增删慢
    + 线程安全，效率低

    ``` java
    // 创建LinkedList
    LinkedList<E> linkedList1 = new LinkedList<>();
    ```

+ Set<E> 不重复，无序

  + HashSet

    ``` java
    // 创建HashSet
    HashSet<E> hashSet = new HashSet<>();
    ```

  + LinkedHashSet

    ``` java
    // 创建LinkedHashSet
    LinkedHashSet<E> linkedHashSet = new LinkedHashSet<>();
    ```

  + TreeSet

    ``` java
    // 创建TreeSet
    TreeSet<E> treeSet = new TreeSet<>();
    ```

    + SortedSet<E> 已排序

      ``` java
      // 已知TreeSet实现了SortedSet
      SortedSet<E> sortedTreeSet = new TreeSet<>();
      ```

### Map<K,V> 双列

+ HashMap

  ``` java
  HashMap<E, E> map = new HashMap<E, E>();
  ```

## 3.Collection的主要方法

### 集合中元素的管理

``` java
// 创建ArrayList
ArrayList<E> list = new ArrayList();
// 增
list.add(E);

// 删
list.remove(E);

// 清空
list.clear();

// 元素个数
list.size();
```

### 判断

```java
// 判断是否包含某个元素
list.contains(Object);

// 判断是否不包含任何元素
list.isEmpty();
```

### 集合的遍历

+ 先转数组在遍历

  ``` java
  // 先定义一个List
  List<String> list = new ArrayList<String>();
  list.add("提子");
  list.add("水蜜桃");
  list.add("芒果");
  // 定义一个数组
  String[] strArr =  new String[list.size()];
  // 方式1
  list.toArray(strArr);
  
  // 方式2
  Object[] strArr =  list.toArray();
  
  for (int i = 0; i < strArr.length; i++) {
              System.out.println(strArr[i]);
          }
  ```

+ 迭代器

+ 增强for循环 foreach

### 重写 toString 方法，返回集合中的所有元素

``` java
// 默认都为此方法；可根据自己的需要定义返回的输出字符串
public String toString() {
    return getClass().getName() + "@" + Integer.toHexString(hashCode());
}
```

## 4.List集合

### 特点

+ ArrayList 类
  + 动态数组
+ 有序号：从0开始
  + 类似数组的下标符号
+ 可重复

### 按序号管理元素

+ 序号超界抛异常

``` java
// 增
void add(int index, E element);

// 删
E remove(int index);

// 改
E set(int index, E element);
```

### 查找

``` java
// 查找元素的序号
int indexOf(Object);

// 查找最后一位元素的序号
int lastIndexOf(Object);
```

### 按序号遍历

``` java
// 遍历的方式有多种，这里例举 按序号遍历
List<String> list = new ArrayList<String>();
list.add("Hello");
list.add("Beautiful");
list.add("World");

for(int i = 0; i < lise.size(); i++) {
    System.out.print(list.get(i) + " ");
}
```

### ListIterator<E> 双向迭代器

``` java
List<String> list = new ArrayList<String>();
list.add("Hello");
list.add("Beautiful");
list.add("World");
    	
ListIterator<String> iterator = list.listIterator();
    	
// 向后遍历
while (iterator.hasNext()) {
    System.out.print(iterator.next() + " ");
}
    	
// 向前遍历
while (iterator.hasPrevious()) {
    System.out.print(iterator.previous() + " ");
}
```

## 5.集合的遍历与迭代器

###  迭代器 Iterator

```java
List<String> list = new ArrayList<String>();
list.add("Hello");
list.add("Beautiful");
list.add("World");
    	
// 创建迭代器
Iterator<String> iterator = list.iterator();
    	
// hasNext 判断集合中是否还有元素
// 使用迭代器遍历时只能向前不能退后
while(iterator.hasNext()) {
    // next 读取集合中的下一个元素
    System.out.println(iterator.next());
}

// 用迭代器删除和遍历不能同时使用
while(iterator.hasNext()) {
    Object e = iterator.next();
    
    if ("Hello".equals(e)) {
        // 删除
        iterator.remove();
    }
}
    	
System.out.println(list);
```

### 增强的for循环

```java
// for循环的一种，简化了数组和集合的遍历，可以用来替代迭代器
// for 循环的目标不能为null
for(集合中元素的类型 e : 集合或数组) {
    循环体;
}
```

### 迭代器的限制

+ 只能迭代一次
+ 用迭代器遍历时，不能增、删元素

## 6.集合如何存储基本的数据类型

### 不能直接存储，需要借助包装类

### 自动装箱和拆箱

## 7.JDK1.8 集合的补充

```java
import java.util.ArrayList;
import java.util.List;

/**
 * @author CAI
 *
 */
public class ListDemo {

	/**
	 * @param args
	 */
	public static void main(String[] args) {
		List<String> list = new ArrayList<String>();
		list.add("Java");
		list.add("JDK 1.8");
		list.add("接口作为方法的参数");
		list.add("方法的引用");
        // 按某个字符串替换
		list.replaceAll(ListDemo::change);
		list.forEach(System.out::println);
		System.out.println("----------");
        // 按某些判断方法删除
		list.removeIf(ListDemo::isDelete);
		list.forEach(System.out::println);
	}

	public static String change(String source) {
		String result;
		
		if (source.startsWith("Java")) {
			result = "Java高级";
			
		} else if (source.startsWith("JDK")) {
			result = source + "新增";
			
		} else {
			result = "Java高级：" + source;
		}
		
		return result;
	}
	
	public static boolean isDelete(String str) {
		return str.startsWith("Java");
	}
}

```

